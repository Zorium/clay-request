TODO: compile to js, and tests
